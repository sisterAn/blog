### ç»„ä»¶ä¸PureComponentä¸æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶

å¯¹äºReactå¼€å‘äººå‘˜æ¥è¯´ï¼ŒçŸ¥é“ä½•æ—¶åœ¨ä»£ç ä¸­ä½¿ç”¨ **Component**ï¼Œ**PureComponent ** å’Œ **Stateless Functional Component** éå¸¸é‡è¦ã€‚

ä½ å¯èƒ½å·²ç»åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­æ³¨æ„åˆ°ï¼Œæˆ‘æ²¡æœ‰å°†å…¶å£°æ˜`Profile`ä¸ºa `Component`ï¼Œè€Œæ˜¯å°†å…¶ç§°ä¸ºa `PureComponent`ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶ã€‚

#### æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶

```js
const Billboard = () => (
  <ZoneBlack>
    <Heading>React</Heading>
    <div className="billboard_product">
      <Link className="billboard_product-image" to="/">
        <img alt="#" src="#">
      </Link>
      <div className="billboard_product-details">
        <h3 className="sub">React</h3>
        <p>Lorem Ipsum</p>
      </div>
    </div>
  </ZoneBlack>
);
```

æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶æ˜¯æ‚¨çš„æ­¦å™¨åº“ä¸­æœ€å¸¸è§çš„ç»„ä»¶ç±»å‹ä¹‹ä¸€ã€‚å®ƒä»¬ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ç®€æ´æ˜äº†çš„æ–¹æ³•æ¥åˆ›å»ºä¸ä½¿ç”¨ä»»ä½•ç±»å‹çš„[**çŠ¶æ€**](https://reactjs.org/docs/faq-state.html)ï¼Œ[**å¼•ç”¨**](https://hackernoon.com/refs-in-react-all-you-need-to-know-fb9c9e2aeb81)æˆ–[**ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç»„ä»¶**](https://reactjs.org/docs/state-and-lifecycle.html)ã€‚

ä½¿ç”¨æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶çš„æƒ³æ³•æ˜¯å®ƒæ˜¯æ— çŠ¶æ€çš„ï¼Œåªæ˜¯ä¸€ä¸ªåŠŸèƒ½ã€‚æ‰€ä»¥æœ€é‡è¦çš„æ˜¯ä½ å°†ç»„ä»¶å®šä¹‰ä¸ºä¸€ä¸ªè¿”å›ä¸€äº›æ•°æ®çš„å¸¸é‡å‡½æ•°ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œæ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶åªæ˜¯è¿”å› JSX çš„å‡½æ•°ã€‚

**æ›´æ–°ï¼š** Reactçš„æœ€æ–°ç‰ˆæœ¬ä¸ºæˆ‘ä»¬å¸¦æ¥äº†Reacté’©å­ï¼Œå®ƒå°†è®©æˆ‘ä»¬åœ¨åŠŸèƒ½ç»„ä»¶ä¸­å£°æ˜ï¼Œæ•ˆæœå’Œå¼•ç”¨ï¼Œè€Œæ— éœ€å°†å®ƒä»¬è½¬æ¢ä¸ºç±»ç»„ä»¶ã€‚

#### PureComponents

é€šå¸¸ï¼Œå½“ç»„ä»¶è·å¾—æ–°çš„propæ—¶ï¼ŒReactå°†é‡æ–°å‘ˆç°è¯¥ç»„ä»¶ã€‚ä½†æœ‰æ—¶ï¼Œä¸€ä¸ªç»„ä»¶ä¼šè·å¾—å°šæœªçœŸæ­£æ”¹å˜çš„æ–°é“å…·ï¼Œä½†Reactä»å°†è§¦å‘é‡æ–°æ¸²æŸ“ã€‚

ä½¿ç”¨`PureComponent`å°†å¸®åŠ©æ‚¨é˜²æ­¢è¿™ç§æµªè´¹çš„é‡æ–°æ¸²æŸ“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœpropæ˜¯å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼å¹¶ä¸”å®ƒå‘ç”Ÿå˜åŒ–ï¼Œåˆ™a `PureComponent`ä¼šè¯†åˆ«å‡ºè¿™ä¸€ç‚¹ï¼Œä½†æ˜¯å¦‚æœå¯¹è±¡ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œåˆ™a `PureComponent`ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚

é‚£ä¹ˆä½ æ€ä¹ˆçŸ¥é“Reactä½•æ—¶è§¦å‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Ÿä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ªåä¸º[Why You You Updateçš„](http://github.com/maicki/why-did-you-update)æƒŠäººçš„ReactåŒ…ã€‚å½“å‘ç”Ÿå¯èƒ½ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“æ—¶ï¼Œæ­¤åŒ…å°†åœ¨æ§åˆ¶å°ä¸­é€šçŸ¥æ‚¨ã€‚

![img](https://miro.medium.com/max/60/1*CL5jum98a0QxOWeIb9QRBg.png?q=20)

ä¸€æ—¦è¯†åˆ«å‡ºä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œå°±å¯ä»¥ä½¿ç”¨a `PureComponent`è€Œä¸æ˜¯a `Component`æ¥é˜²æ­¢äº‹æƒ…è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚

#### æ€»ç»“

çº¯ç»„ä»¶å¯ç¡®ä¿æ‚¨çš„åº”ç”¨å¿«é€Ÿè¿è¡Œ æœ‰æ—¶ - æ›´å¯é¢„æµ‹ï¼Œä½†ç»å¸¸ - `less predictable`åªè¦å®ƒä»¬æ”¹å˜åº”ç”¨ç¨‹åºçš„å·¥ä½œæ–¹å¼ã€‚å®ƒçš„æ–¹å¼`flows`ã€‚

`Stateless`ç»„ä»¶æ˜¯`not pure`ï¼Œå¹¶ä¸”å¯èƒ½æ¯”ä»»ä½•ç±»å‹çš„PureComponentsè¿è¡Œå¾—æ…¢ã€‚ä½†é€šå¸¸è¿™ä¸æ˜¯ä½ åº”è¯¥è€ƒè™‘çš„äº‹æƒ…ã€‚å®ƒä»¬ç”±çº¯å‡½æ•°æ„æˆï¼Œå¹¶ä¸”æ˜¯å¯é¢„æµ‹çš„ã€‚

ä½†æ˜¯......å¦‚æœæ‚¨å¸Œæœ›åˆ›å»ºå…·æœ‰è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„å¿«é€Ÿåº”ç”¨ç¨‹åº - æ‚¨å¿…é¡»ä½¿ç”¨Pure Componentæˆ–shouldComponentUpdateï¼ˆsCUï¼‰ã€‚

å¹¶ä¸”ä½¿ç”¨å®ƒä»¬çš„å”¯ä¸€æ–¹æ³• - ä½œä¸ºâ€œäº‹ä»¶ä¼ æ’­è¾¹ç•Œâ€ã€‚åœ¨å¯é¢„æµ‹çš„åœ°æ–¹å¯é¢„æµ‹çš„â€œäº‹ä»¶è§†é‡â€ã€‚æˆä¸ºä»»ä½•æ›´æ–°çš„å¼€å§‹ï¼ˆä½œä¸ºreduxæˆ–Context APIï¼‰ï¼Œå¹¶æˆä¸ºä»»ä½•â€œæ„å¤–â€çš„ç»“æŸã€‚â€œæ„å¤–â€ã€‚â€œä¸éœ€è¦â€ã€‚â€œæœªçŸ¥â€ã€‚



**ä½•æ—¶ä½¿ç”¨Pure Componentsï¼Ÿ**

å‡è®¾æ‚¨åˆ›å»ºäº†ä¸€ä¸ªå­—å…¸é¡µé¢ï¼Œå…¶ä¸­æ˜¾ç¤ºäº†ä»¥Aå¼€å¤´çš„æ‰€æœ‰è‹±è¯­å•è¯çš„å«ä¹‰ã€‚ç°åœ¨æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªç»„ä»¶ï¼Œè¯¥ç»„ä»¶å°†å•è¯åŠå…¶å«ä¹‰ä½œä¸ºé“å…·å¹¶è¿”å›æ­£ç¡®çš„è§†å›¾ã€‚å¹¶ä¸”å‡è®¾æ‚¨ä½¿ç”¨åˆ†é¡µä¸€æ¬¡åªæ˜¾ç¤º10ä¸ªå•è¯ï¼Œå¹¶åœ¨æ»šåŠ¨æ—¶è¦æ±‚å¦å¤–10ä¸ªå•è¯å¹¶æ›´æ–°çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçº¯ç»„åˆ†åº”è¯¥ç”¨ä½œ`it will avoid rendering of all the words which rendered in previous API request.`

`Also in cases where you want to use lifecycle methods of Component then we have to use Pure Components as stateless components don't have lifecycle methods.`

**ä½•æ—¶ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼Ÿ**

å‡è®¾æ‚¨è¦åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸€äº›æ¼‚äº®UIçš„æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾å°†ç”¨äºè¯„ä¼°BEGINNERï¼ŒMODERATEï¼ŒEXPERTç­‰é…ç½®æ–‡ä»¶çš„å¯ä¿¡åº¦ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªéå¸¸å°çš„ç»„ä»¶ï¼Œå…¶é‡æ–°æ¸²æŸ“å‡ ä¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå¹¶ä¸ºè¿™æ ·ä¸€ä¸ªå°æ¡ˆä¾‹åˆ›å»ºä¸€ä¸ªæ–°ç»„ä»¶å°†æ˜¯è€—æ—¶çš„ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨ç»§ç»­ä¸ºéå¸¸å°çš„è§†å›¾åˆ¶ä½œç»„ä»¶ï¼Œå¾ˆå¿«æ‚¨å°†ä¼šé‡åˆ°å¦‚æ­¤å¤šçš„ç»„ä»¶ï¼Œå¹¶ä¸”åœ¨å¤„ç†å¤§å‹é¡¹ç›®æ—¶å¾ˆéš¾ç®¡ç†ã€‚åŒæ—¶å§‹ç»ˆç‰¢è®°Pure Componentå…·æœ‰shallowEqualçš„ç‰¹æ€§ã€‚

# **ç»“è®º**

Pure Componentsæé«˜äº†æ€§èƒ½ï¼Œå› ä¸ºå®ƒå‡å°‘äº†åº”ç”¨ç¨‹åºä¸­çš„æ¸²æŸ“æ“ä½œæ¬¡æ•°ï¼Œè¿™å¯¹äºå¤æ‚çš„UIæ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼Œå› æ­¤å»ºè®®å°½å¯èƒ½ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›æƒ…å†µéœ€è¦ä½¿ç”¨Componentçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ã€‚

æ— çŠ¶æ€ç»„ä»¶æ˜“äºå®æ–½ä¸”å¿«é€Ÿå®æ–½ã€‚å®ƒä»¬é€‚ç”¨äºéå¸¸å°çš„UIè§†å›¾ï¼Œå…¶ä¸­é‡æ–°æ¸²æŸ“æˆæœ¬æ— å…³ç´§è¦ã€‚å®ƒä»¬æä¾›æ›´æ¸…æ™°çš„ä»£ç å’Œæ›´å°‘çš„æ–‡ä»¶æ¥å¤„ç†ã€‚



# ä¸ºä»€ä¹ˆArrowå‡½æ•°å’Œç»‘å®šåœ¨Reactçš„æ¸²æŸ“ä¸­æ˜¯æœ‰é—®é¢˜çš„

## ï¼ˆæç¤ºï¼šå®ƒä½¿å¾—shouldComponentUpdateå’ŒPureComponentå˜å¾—æš´èºï¼‰

 è¿™æ˜¯Reactä¸­çš„å¸¸è§åœºæ™¯ï¼šæ‚¨æ­£åœ¨æ˜ å°„æ•°ç»„ï¼Œå¹¶ä¸”æ‚¨éœ€è¦æ¯ä¸ªé¡¹ç›®è°ƒç”¨å•å‡»å¤„ç†ç¨‹åºå¹¶ä¼ é€’ä¸€äº›ç›¸å…³æ•°æ®ã€‚

è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚æˆ‘æ­£åœ¨éå†ç”¨æˆ·åˆ—è¡¨å¹¶å°†userIdä¼ é€’ç»™ç¬¬31è¡Œçš„deleteUserå‡½æ•°ã€‚

```
import React from 'react';

class App extends React.Component {
  constructor() {
    this.state = {
      users: [
        { id: 1, name: 'Cory' }, 
        { id: 2, name: 'Meg' }
      ]
    };
  }
  
  deleteUser = id => {
    this.setState(prevState => {
      return { users: prevState.users.filter( user => user.id !== id)}
    })
  }

  render() {
    return (
      <div>
        <h1>Users</h1>
        <ul>
        { 
          this.state.users.map( user => {
            return (
              <li key={user.id}>
                <input 
                  type="button" 
                  value="Delete" 
                  onClick={() => this.deleteUser(user.id)} 
                /> 
                {user.name}
              </li>
            )
          })
        }
        </ul>
      </div>
    );
  }
}

export default App;
```

è¿™æ˜¯[å…³äºCodesandbox](https://codesandbox.io/s/0OP2Yq87)çš„ä¸€ä¸ª[å·¥ä½œç¤ºä¾‹](https://codesandbox.io/s/0OP2Yq87)ã€‚ï¼ˆå¤ªæ£’äº†ï¼Ÿï¼‰

### æ‰€ä»¥æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ

æˆ‘åœ¨ç‚¹å‡»å¤„ç†ç¨‹åºä¸­ä½¿ç”¨äº†ç®­å¤´åŠŸèƒ½ã€‚è¿™æ„å‘³ç€**æ¯æ¬¡æ¸²æŸ“è¿è¡Œæ—¶ï¼Œéƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°å‡½æ•°**ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä½ æœ‰å­ç»„ä»¶ï¼Œå³ä½¿æ•°æ®æ²¡æœ‰æ”¹å˜ï¼Œå®ƒä»¬ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºæ¯ä¸ªæ¸²æŸ“å™¨éƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°å‡½æ•°ã€‚

**ç»“è®º**ï¼šé¿å…åœ¨æ¸²æŸ“ä¸­å£°æ˜ç®­å¤´å‡½æ•°æˆ–ç»‘å®šä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚æˆ‘çš„å›¢é˜Ÿä½¿ç”¨[æ­¤ESLintè§„åˆ™](https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md)æ¥å¸®åŠ©æé†’æˆ‘ä»¬æ­¤é—®é¢˜ã€‚

### ä»€ä¹ˆæ˜¯è§£å†³æ–¹æ¡ˆï¼Ÿ

é‚£ä¹ˆå¦‚ä½•åœ¨æ¸²æŸ“ä¸­é¿å…ç»‘å®šå’Œç®­å¤´å‡½æ•°ï¼Ÿä¸€ç§é€‰æ‹©æ˜¯æå–å­ç»„ä»¶ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†åˆ—è¡¨é¡¹æå–åˆ°UserListItem.jsï¼š

```
import React from 'react';
import PropTypes from 'prop-types';

class UserListItem extends React.Component {
  onDeleteClick = () => {
    // No bind needed since we can compose 
    // the relevant data for this item here
    this.props.onClick(this.props.user.id);
  }

  // No arrow func in render! ?
  render() {
    return (
      <li>
        <input 
          type="button" 
          value="Delete" 
          onClick={this.onDeleteClick} 
        /> 
        {this.props.user.name}
      </li>
    );
  }
}

UserListItem.propTypes = {
  user: PropTypes.object.isRequired,
  onClick: PropTypes.func.isRequired
};

export default UserListItem;
```

ç„¶åï¼Œçˆ¶ç»„ä»¶çš„æ¸²æŸ“å˜å¾—æ›´ç®€å•ï¼Œå¹¶ä¸”ä¸å†éœ€è¦åŒ…å«ç®­å¤´åŠŸèƒ½ã€‚å®ƒé€šè¿‡æ–°çš„â€œrenderUserListItemâ€å‡½æ•°ä¸­çš„propsä¼ é€’æ¯ä¸ªåˆ—è¡¨é¡¹çš„ç›¸å…³ä¸Šä¸‹æ–‡ã€‚

```
import React from 'react';
import { render } from 'react-dom';
import UserListItem from './UserListItem';

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      users: [{ id: 1, name: 'Cory' }, { id: 2, name: 'Sherry' }],
    };
  }

  deleteUser = id => {
    this.setState(prevState => {
      return { users: prevState.users.filter(user => user.id !== id) };
    });
  };

  renderUserListItem = user =>
    <UserListItem key={user.id} user={user} onClick={this.deleteUser} />;

  render() {
    return (
      <div>
        <h1>Users</h1>
        <ul>
          {this.state.users.map(this.renderUserListItem)}
        </ul>
      </div>
    );
  }
}

render(<App />, document.getElementById('root'));
```

è¯·æ³¨æ„ï¼Œåœ¨æ˜ å°„æ—¶ä¸ä½¿ç”¨æ¸²æŸ“ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œè€Œæ˜¯åœ¨ç¬¬19è¡Œè°ƒç”¨åœ¨renderå¤–éƒ¨å£°æ˜çš„æ–°å‡½æ•°ã€‚åœ¨æ¯ä¸ªæ¸²æŸ“ä¸Šä¸å†æœ‰å‡½æ•°åˆ†é…ã€‚ï¼Ÿ

è¿™æ˜¯[æœ€ç»ˆé‡æ„](https://codesandbox.io/s/jqQ0AlQlW)çš„ä¸€ä¸ª[å·¥ä½œç¤ºä¾‹](https://codesandbox.io/s/jqQ0AlQlW)ã€‚

### Yayè¿˜æ˜¯Yuckï¼Ÿ

æ­¤æ¨¡å¼é€šè¿‡æ¶ˆé™¤å†—ä½™åŠŸèƒ½åˆ†é…æ¥æé«˜æ€§èƒ½ã€‚å› æ­¤ï¼Œå½“è¿™ç§æƒ…å†µé€‚ç”¨äºæ‚¨çš„ç»„ä»¶æ—¶ï¼Œå®ƒæœ€æœ‰ç”¨ï¼š

1. æ¸²æŸ“ç»å¸¸è¢«è°ƒç”¨ã€‚
2. æ¸²æŸ“å­©å­å¾ˆè´µã€‚

æ— å¯å¦è®¤ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæå–å­ç»„ä»¶ä¹Ÿæ˜¯é¢å¤–çš„å·¥ä½œã€‚å®ƒéœ€è¦æ›´å¤šçš„ç§»åŠ¨éƒ¨ä»¶å’Œæ›´å¤šçš„ä»£ç ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æ²¡æœ‰é‡åˆ°æ€§èƒ½é—®é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥è¯´æ˜¯è¿‡æ—©çš„ä¼˜åŒ–ï¼Ÿ

æ‰€ä»¥ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šå…è®¸ç®­å¤´å’Œç»‘å®šåˆ°å¤„ï¼ˆå¦‚æœå¼¹å‡ºå®ƒä»¬å¤„ç†perfé—®é¢˜ï¼‰ï¼Œæˆ–è€…ç¦æ­¢å®ƒä»¬ä»¥è·å¾—æœ€ä½³æ€§èƒ½å’Œä¸€è‡´æ€§ã€‚

**åº•çº¿ï¼š**æˆ‘å»ºè®®ç¦æ­¢ç®­å¤´å¹¶åœ¨æ¸²æŸ“ä¸­ç»‘å®šã€‚åŸå› å¦‚ä¸‹ï¼š

1. æ‚¨å¿…é¡»ç¦ç”¨æˆ‘ä¸Šé¢å»ºè®®çš„[æœ‰ç”¨çš„ESLintè§„åˆ™](https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md)æ‰èƒ½å…è®¸å®ƒã€‚
2. ç¦ç”¨lintingè§„åˆ™åï¼Œäººä»¬å¯èƒ½ä¼šå¤åˆ¶æ­¤æ¨¡å¼å¹¶å¼€å§‹ç¦ç”¨å…¶ä»–lintingè§„åˆ™ã€‚åœ¨ä¸€ä¸ªåœ°æ–¹çš„ä¾‹å¤–å¯ä»¥å¾ˆå¿«æˆä¸ºå¸¸æ€......

[![img](https://pbs.twimg.com/profile_images/650743198348808192/LT6SeOJr_bigger.jpg)](https://twitter.com/housecor)[Cory House@housecor](https://twitter.com/housecor)General rule for code reviews:
Each line of code should be worthy of copying. 
Because people will.[#cleancode](https://twitter.com/hashtag/cleancode?src=hash)[93](https://twitter.com/intent/like?tweet_id=839511073279598594)[12:20 AM - Mar 9, 2017](https://twitter.com/housecor/status/839511073279598594)[Twitter Ads info and privacy](https://support.twitter.com/articles/20175256)[50 people are talking about this](https://twitter.com/housecor/status/839511073279598594)

å› æ­¤ï¼Œæˆ‘å‘ç°æå–å­ç»„ä»¶æ˜¯ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ï¼Œä»¥é¿å…åœ¨æ¸²æŸ“ä¸­ç»‘å®šã€‚

æœ‰å¦ä¸€ç§æ–¹å¼å¯ä»¥å¤„ç†å—ï¼Ÿé€šè¿‡è¯„è®ºç¼–é’Ÿï¼

è¿™ç¯‡æ–‡ç« æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨PureComponentï¼Œå³ä½¿æ˜¯æ–°å¼€å‘äººå‘˜ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚

æˆ‘ä»¬å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„ä¸»é¢˜ï¼š

1. ä¸ºä»€ä¹ˆæˆ‘ä»¬çœŸçš„éœ€è¦PureComponentï¼Ÿ
2. ä»€ä¹ˆæ˜¯PureComponentï¼Ÿ
3. ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨PureComponentï¼Ÿ
4. å½“æˆ‘ä»¬ä½¿ç”¨PureComponentï¼Ÿ

é¦–å…ˆï¼Œæˆ‘ä»¬åº”è¯¥ç†è§£ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦PureComponentã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚çœ‹çœ‹è¿™ä¸ªç®€å•çš„ä¾‹å­

```
ä»'react'å¯¼å…¥React; export default class Demo extends React.Component { 
  state = { 
    nameï¼š'PureComponent' 
  } componentDidMountï¼ˆï¼‰{ 
   setIntervalï¼ˆï¼ˆï¼‰=> this.setStateï¼ˆ{nameï¼š'PureComponent'}ï¼‰ï¼Œ2000ï¼‰
  }   renderï¼ˆï¼‰{ 
   consoleã€‚ logï¼ˆ'Re-rendering'ï¼‰
    returnï¼ˆ
      <ChildComponent name = {this.state.name} /> 
    ï¼‰
  } 
} const ChildComponent =ï¼ˆpropsï¼‰=> { 
  returnï¼ˆ
    <div> {props.name} </ div> 
  ï¼‰
}
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå³ä½¿çŠ¶æ€ï¼ˆåç§°ï¼‰ç›¸ä¼¼ï¼ŒDemoComponentä¹Ÿä¼šæ¯2ç§’é‡æ–°æ¸²æŸ“ä¸€æ¬¡ã€‚çœ‹ä¸€ä¸‹æ§åˆ¶å°æ‰“å°â€œé‡æ–°æ¸²æŸ“â€çš„æ¬¡æ•°ã€‚å¥‡æ€ªï¼Ÿï¼Ÿæ˜¯çš„ï¼Œå®ƒé™ä½äº†æ€§èƒ½ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è§£å†³æ­¤é—®é¢˜ã€‚ä½ å¯ä»¥è‡ªå·±åšï¼Œæˆ–è€…Reactä¼šä¸ºä½ åšã€‚

**ShouldComponentUpdateï¼š**é€šè¿‡ä½¿ç”¨ShouldComponentUpdateç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ‚¨å¯ä»¥é¿å…é‡æ–°æ¸²æŸ“

```
ä»'react'å¯¼å…¥React; export default class Demo extends React.Component { 
  state = { 
    nameï¼š'PureComponent' 
  } componentDidMountï¼ˆï¼‰{ 
   setIntervalï¼ˆï¼ˆï¼‰=> this.setStateï¼ˆ{nameï¼š'PureComponent'}ï¼‰ï¼Œ2000ï¼‰
  } shouldComponentUpdateï¼ˆnextStateï¼ŒnextPropsï¼‰ { 
ifï¼ˆthis.state.name === nextState.nameï¼‰{ 
    return true 
  } 
return false 
} renderï¼ˆï¼‰{ 
   console.logï¼ˆ'Re-rendering'ï¼‰
    returnï¼ˆ
      <ChildComponent name = {this.state.name} / > 
    ï¼‰
  } 
} const ChildComponent =ï¼ˆpropsï¼‰=> { 
  returnï¼ˆ
    <div> {props.name} </ div>
```

ç¬¬äºŒç§æ–¹å¼æ˜¯ï¼Œ**Reactä¼šä¸ºä½ åšã€‚**PureComponentåœ¨è¿™é‡Œå‡ºç°ã€‚

**PureComponent**`React.PureComponent`ç±»ä¼¼äº`React.Component`ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äº`React.Component`å®ƒæ²¡æœ‰å®ç°`shouldComponentUpdate()`ï¼Œè€Œæ˜¯`React.PureComponent`é€šè¿‡æµ…çš„propå’ŒçŠ¶æ€æ¯”è¾ƒæ¥å®ç°å®ƒã€‚

è¿™æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­PureComponentçš„å®šä¹‰ã€‚è¿™é€šè¿‡è‡ªæˆ‘ååº”æ·»åŠ äº†shouldComponentUpdateç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½¿æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´ç®€å•ã€‚å¥½å¤šäº†ï¼Ÿï¼Ÿè¿™é‡Œæˆ‘ä»¬å»..åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ç”¨React.PureComponentæ›¿æ¢React.Component

```
ä»'react'å¯¼å…¥React; // PureComponent 
å¯¼å‡ºé»˜è®¤ç±»Demoæ‰©å±•React.PureComponent { 
  state = { 
    nameï¼š'PureComponent' 
  } componentDidMountï¼ˆï¼‰{ 
   setIntervalï¼ˆï¼ˆï¼‰=> this.setStateï¼ˆ{nameï¼š'PureComponent'}ï¼‰ï¼Œ2000ï¼‰
  } renderï¼ˆï¼‰ { 
   console.logï¼ˆ'Re-rendering'ï¼‰
    returnï¼ˆ
      <ChildComponent name = {this.state.name} /> 
    ï¼‰
  } 
} const ChildComponent =ï¼ˆpropsï¼‰=> { 
  returnï¼ˆ
    <div> {props.name} </ div> 
  ï¼‰
}
```

**å½“æˆ‘ä»¬ä¸åº”è¯¥ä½¿ç”¨PureComponent** PureComponentæ—¶ï¼Œä½¿ç”¨æµ…å¯¹æ¯”å³å¯¹è±¡å¼•ç”¨ã€‚è®©æˆ‘ä»¬è¯´å¦‚æœæˆ‘ä»¬åœ¨å¯¹è±¡ä¸­æœ‰å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå®ƒå°±ä¸ä¼šè¢«åå°„ï¼Œå®ƒä¼šäº§ç”Ÿé”™è¯¯çš„ç»“æœ

**å½“æˆ‘ä»¬ä½¿ç”¨PureComponent**å½“æ‚¨çš„stateæˆ–propså¯¹è±¡å…·æœ‰ç®€å•çš„æ•°æ®ç»“æ„æ—¶ï¼Œè¯·ä½¿ç”¨Pure Componentä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½

æ„Ÿè°¢é˜…è¯»ç°åœ¨åšä¸€äº›ä¼Ÿå¤§çš„äº‹æƒ…ğŸ˜€