### å‰è¨€

æ¥å£è°ƒç”¨æ˜¯æ¯ä¸€ä¸ªè½¯ä»¶å¼€å‘ä»ä¸šè€…å¿…ä¸å¯å°‘çš„ä¸€é¡¹æŠ€èƒ½ï¼Œä¸€ä¸ªé¡¹ç›®çš„å®Œæˆå¿…ç„¶ç»è¿‡å¤§é‡çš„æ¥å£æµ‹è¯•ï¼Œå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¥å£è°ƒè¯•çš„æ—¶é—´ä¸æ¯”å®é™…å¼€å‘æ‰€ç”¨çš„æ—¶é—´å°‘ã€‚

ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ Postmanï¼ˆæˆ– PostWoman ï¼‰ å·¥å…·æ¥è¿›è¡ŒREST APIè°ƒç”¨ã€‚

### ä¸€ã€Postman é™åˆ¶

Postman ç”¨æ¥è°ƒè¯•æ¥å£å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒæœ‰å¾ˆå¤šé™åˆ¶ã€‚

#### 1. éœ€è¦å¼€å¯é¢å¤–çš„è½¯ä»¶ï¼Œå¹¶ä¸”å ç”¨å¤§é‡çš„ RAM

æˆ‘ä»¬å·²ç»ä½¿ç”¨ VSCode å¼€å‘é¡¹ç›®ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦é¢å¤–æ‰“å¼€ Postman å»è°ƒè¯•æ¥å£å–ƒï¼Ÿå¹¶ä¸” Postman è¿è¡Œå ç”¨äº†å¤§é‡çš„ RAMï¼Œè¿™å¯¹ RAM ç´§ç¼ºçš„è®¾å¤‡æ¥è¯´ï¼Œå°¤ä¸ºé‡è¦ã€‚

#### 2. é«˜çº§åŠŸèƒ½è¦ä»˜è´¹

è¿›è¡Œè°ƒç”¨æµ‹è¯• API æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœä½ è¦ç¼–è¾‘ã€ç‰ˆæœ¬åŒ–æˆ–ä»…ä¸ä½ çš„å›¢é˜Ÿå…±äº«å®ƒï¼Œåˆ™ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚

å½“ç„¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Postman ä»˜è´¹è®¡åˆ’ï¼Œä½†è¿™æ„å‘³ç€ä½ éœ€è¦ä»˜è´¹ï¼Œå¹¶ä¸”ä½ æ‰€åœ¨çš„æ‰€æœ‰å›¢é˜Ÿéƒ½éœ€è¦ä½¿ç”¨ Postman ï¼Œè¿™å·¥ç¨‹é‡å°±å¾ˆå¤§äº†ï¼

### äºŒã€ä½ çŸ¥é“ REST Client å—ï¼Ÿ

![](http://resource.muyiy.cn/image/20200116201023.png)

REST Client æ˜¯ä¸€ä¸ª VS Code æ‰©å±•æ’ä»¶ï¼Œå®ƒå…è®¸ä½ å‘é€ HTTP è¯·æ±‚å¹¶ç›´æ¥åœ¨ VS Code ä¸ŠæŸ¥çœ‹å“åº”ç»“æœã€‚

ç”±äºå®ƒæ˜¯åŸºäºæ–‡æœ¬æ ¼å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è½»æ¾çš„åœ¨å­˜å‚¨åº“ä¹‹é—´è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ğŸ‘

### ä¸‰ã€Postman ä¸ REST Client

#### ä¼˜ç‚¹

- èƒ½å¤Ÿè¿›è¡Œç‰ˆæœ¬åŒ–å¹¶å¯ä»¥åœ¨å›¢é˜Ÿé—´å…±äº«ä½ çš„ API è°ƒç”¨ï¼›
- ä»…ä»…æ˜¯ä¸€ä¸ª HTTP æ–‡ä»¶ï¼Œå›¢é˜Ÿæˆå‘˜é—´å¯ä»¥é€šè¿‡ git åä½œç»´æŠ¤è¿™ä¸ªæ–‡ä»¶ï¼›
- æ— éœ€åˆ‡æ¢çª—å£ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª HTTP æ–‡ä»¶ä¸­å»ç»´æŠ¤å¤šä¸ªæ¥å£ï¼›
- ç›¸æ¯”äºPostmanï¼ŒREST Clientæ”¯æŒäº†Â [cURL](https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/CURL)Â å’ŒÂ [RFC 2616](https://link.zhihu.com/?target=https%3A//www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)Â ä¸¤ç§æ ‡å‡†æ¥è°ƒç”¨REST APIï¼›

#### ç¼ºç‚¹

- ä½ å¿…é¡»ä½¿ç”¨ VS Codeï¼Œå¦‚æœä½¿ç”¨å…¶å®ƒçš„å·¥å…·å¼€å‘æ˜¯ä¸å¯ä»¥çš„ï¼›
- Postman æ‹¥æœ‰å¼ºå¤§çš„ç”¨æˆ·æ“ä½œç•Œé¢ï¼Œè€Œ REST Client æ²¡æœ‰æ“ä½œç•Œé¢ï¼Œä»…ä»…æ˜¯åœ¨ä¸€ä¸ª HTTP æ–‡ä»¶ä¸­ç¼–å†™è¯·æ±‚ï¼Œæ²¡æœ‰ Postman æ–¹ä¾¿ï¼›

### å››ã€REST Client

#### 1. å¸¸è§„

**æ­¥éª¤ä¸€ï¼šå®‰è£… REST Client æ’ä»¶**

**æ­¥éª¤äºŒï¼š åˆ›å»ºä¸€ä¸ª `.http` æˆ– `.rest` æ–‡ä»¶**

**æ­¥éª¤ä¸‰ï¼šå†™å…¥æµ‹è¯•æ¥å£**

1. ç¬¦åˆ RFC 2616 æ ‡å‡†çš„ POST è¯·æ±‚

```js
POST http://dummy.restapiexample.com/api/v1/create HTTP/1.1
content-type: application/json

{
    "name":"Hendry",
    "salary":"61888",
    "age":"26"
}
```

2. ç¬¦åˆ cURL æ ‡å‡†çš„ POST è¯·æ±‚

```js
curl -X POST "http://dummy.restapiexample.com/api/v1/create" -d "Hello World"
```

å¦‚æœçœç•¥ `request` æ–¹æ³•ï¼Œè¯·æ±‚å°†è¢«è§†ä¸º `GET` ã€‚

æ³¨æ„ï¼šæ¥å£é—´é€šè¿‡ `###` åˆ†éš”ï¼ŒåŒä¸€ä¸ª `.http` æ–‡ä»¶é‡Œå¯ä»¥æ¶µç›–å¤šä¸ª HTTP è¯·æ±‚ã€‚ä¸åƒ Postmanï¼Œä¸åŒçš„ HTTP è¯·æ±‚éœ€è¦æ”¾åœ¨ä¸åŒçš„ tab é‡Œã€‚

**æ­¥éª¤å››ï¼šå‘é€è¯·æ±‚ï¼Œæµ‹è¯•æ¥å£**

ç‚¹å‡» `Send Request` ï¼Œæˆ–è€…å³é”®é€‰æ‹© `Send Request` ï¼Œæˆ–è€…ç›´æ¥ç”¨å¿«æ·é”® `Ctrl+Alt+R`ï¼ˆæˆ–`Cmd+Alt+R`ï¼‰ ï¼Œä½ çš„ REST API å°±æ‰§è¡Œäº†ï¼Œç„¶å API Response å°±ä¼šæ˜¾ç¤ºåœ¨å³è¾¹åŒºåŸŸã€‚

![](http://resource.muyiy.cn/image/20200116201054.png)

#### 2. æ›´è¿œä¸€æ­¥

ä¸€ä¸ª http æ–‡ä»¶å¯èƒ½å®šä¹‰è®¸å¤šè¯·æ±‚å’Œæ–‡ä»¶çº§è‡ªå®šä¹‰å˜é‡ï¼Œå¾ˆéš¾æ‰¾åˆ°ä½ æƒ³è¦çš„è¯·æ±‚/å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¿«æ·é”® `Ctrl+Shift+O`ï¼ˆæˆ–`Cmd+Shift+O`ï¼‰æ¥åˆ‡æ¢è¯·æ±‚/å˜é‡ã€‚



**è‡ªå®šä¹‰ç¯å¢ƒå˜é‡**

Code  => Preferences => Settings æ‰“å¼€è®¾ç½®ï¼Œåˆ‡æ¢åˆ° `Workspace Settings` ï¼Œé…ç½® `settings.json` æ–‡ä»¶ï¼š

```js
{
  "rest-client.environmentVariables": {
    "$shared": {
        "version": "v1",
        "prodToken": "foo",
        "nonProdToken": "bar"
    },
    "local": {
        "version": "v2",
        "host": "localhost",
        "dummyhost": "local",
        "token": "{{$shared nonProdToken}}",
        "secretKey": "devSecret"
    },
    "production": {
        "host": "api.apiopen.top",
        "dummyhost": "dummy.restapiexample.com",
        "token": "{{$shared prodToken}}",
        "secretKey" : "prodSecret"
    }
  }
}
```

å¯ä»¥åˆ‡æ¢ä¸åŒçš„ç¯å¢ƒï¼ˆCtrl+Alt+E æˆ– Cmd+Alt+Eï¼‰ï¼Œè°ƒç”¨ç›¸åº”çš„é…ç½®é¡¹ï¼ˆ`host` ã€ `token` ç­‰ï¼‰ã€‚

```js
### æµ‹è¯•æ¥å£ RFC 2616
// host ä¸ºç¯å¢ƒå˜é‡
GET https://{{host}}/musicRankings HTTP/1.1
```



**è‡ªå®šä¹‰æ–‡ä»¶å˜é‡**

- ä½ å¯ä»¥åœ¨ HTTP æ–‡ä»¶ä»»æ„ä½ç½®å®šä¹‰æ–‡ä»¶å˜é‡ï¼Œå®ƒä»¬éƒ½å¯ä»¥åœ¨æ•´ä¸ªæ–‡ä»¶çš„ä»»ä½•è¯·æ±‚ä¸­å¼•ç”¨ï¼›

- å¯¹äºæ–‡ä»¶å˜é‡ï¼Œå®šä¹‰éµå¾ª `@variableName = variableValue` å ç”¨å®Œæ•´è¡Œçš„è¯­æ³•ï¼›
- å˜é‡åç§°ï¼ˆ`variableName`ï¼‰ä¸å¾—åŒ…å«ä»»ä½•ç©ºæ ¼ã€‚è‡³äºå˜é‡å€¼ï¼ˆ`variableValue`ï¼‰ï¼Œå®ƒå¯ä»¥ç”±ä»»ä½•å­—ç¬¦ç»„æˆï¼Œç”šè‡³å…è®¸ç©ºæ ¼ï¼ˆå‰å¯¼å’Œå°¾éšç©ºæ ¼å°†è¢«å‰¥ç¦»ï¼‰ï¼›
- å¦‚æœä½ æƒ³ä¿ç•™ä¸€äº›åƒæ¢è¡Œç¬¦è¿™æ ·çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä½ å¯ä»¥ä½¿ç”¨åæ–œæ  `\n` ï¼›

```js
// æ–‡ä»¶å˜é‡
@port = 8080
@contentType = application/json

### æµ‹è¯•æ¥å£ RFC 2616
// æ–‡ä»¶å˜é‡
@name = musicRankings
GET https://{{host}}/{{name}} HTTP/1.1
```



**è‡ªå®šä¹‰è¯·æ±‚å˜é‡**

å½“å•ä¸ªè¯·æ±‚ç»“æœçš„å€¼éœ€è¦è¢«å…¶å®ƒè¯·æ±‚ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯·æ±‚å˜é‡ï¼Œæ ¼å¼ä¸ºï¼š`@name newname` ï¼Œè¯·æ±‚å˜é‡å¼•ç”¨è¯­æ³•ä¸º `{{requestName.(response|request).(body|headers).(JSONPath|XPath|Header Name)}}`ã€‚

```js
@contentType = application/json

###

# @name createComment
POST https://{{host}}/comments HTTP/1.1
Content-Type: {{contentType}}

###

# @name getCreatedComment

GET https://{{host}}/comments/{{createComment.response.body.$.id}} HTTP/1.1

Authorization: {{login.response.headers.X-AuthToken}}
```



**ç³»ç»Ÿå˜é‡**

ç³»ç»Ÿè‡ªå¸¦çš„ä¸€äº›å˜é‡ï¼Œä½¿ç”¨ç³»ç»Ÿå˜é‡éœ€è¦æœ‰ `$`ç¬¦å·

- `{{$guid}}` å”¯ä¸€è¯†åˆ«å·
- `{{$randomInt min max}}` è¿”å›ä¸€ä¸ª`min` å’Œ `max` ä¹‹é—´çš„éšæœºæ•°
- `{{$timestamp [offset option]}}`ï¼šæ·»åŠ `UTC`æ—¶é—´æˆ³ã€‚
- `{{$timestamp number option}}`ï¼Œä¾‹å¦‚3å°æ—¶å‰`{{$timestamp -3 h}}`;ä»£è¡¨åå¤©`{{$timestamp 2 d}}`ã€‚

æ›´å¤šç³»ç»Ÿå˜é‡ç”¨æ³•è¯·å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://marketplace.visualstudio.com/items?itemName=humao.rest-client#overview)

![](http://resource.muyiy.cn/image/20200116201113.png)

**æ›´å¤šåŠŸèƒ½ç­‰å¾…ä½ çš„æŒ–æ˜ï¼Œè¯¦è§[vscode-restclient](https://github.com/Huachao/vscode-restclient#environment-variables)ï¼ï¼ï¼ğŸ‘ğŸ‘ğŸ‘**

### äº”ã€æ€»ç»“

Postman æœ‰å£çš†ç¢‘ï¼Œç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„å·¥å…·ï¼Œä½† REST Client ä¹Ÿå€¼å¾—è¿›è¡Œå°è¯•ï¼Œæ¯•ç«Ÿè¿åç«¯ä¹Ÿå·²ç»æ¨å‡ºäº†  IDEA REST Clientï¼Œ åœ¨å’ŒåŒäº‹è¿›è¡Œåä½œå¼€å‘æ—¶ï¼Œåœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ª `.http` æ¥å£è¯·æ±‚æ–‡ä»¶ï¼Œæ–¹ä¾¿è‡ªå·±çš„åŒæ—¶æ–¹ä¾¿å…¶ä»–äººã€‚

å¦‚æœè§‰å¾—ä¸é”™ï¼Œå°±åˆ†äº«ç»™ä½ çš„å°ä¼™ä¼´å§ï¼